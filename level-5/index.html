<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>The Medium</title>
    <meta name="The Medium" content="The Medium" />
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <!--     AFRAME EXTRA -->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

    <!-- LOOK-AT COMPONENT -->
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <!-- ******** NEW EVENT-SET COMPONENT VERSION FOR A-FRAME v1.0.4 ******** -->
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <!-- ******** NEW SUPER-HANDS COMPONENT VERSION FOR A-FRAME v1.0.4 ******** -->
    <!-- ******** With v3.0.0 you need to serve progressive-controls yourself ******** -->
    <script src="https://unpkg.com/super-hands@3.0.0/dist/super-hands.min.js"></script>
    <script src="./js/progressive-controls.js" defer></script>
    <!-- ******** THE PHYSICS SYSTEM HAS BEEN ORGANISED IN A SPECIFIC COMPONENT (no more aframe-extras) ******** -->
    <!-- ******** You can find out more visiting the repo here: https://github.com/donmccurdy/aframe-physics-system ******** -->
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    <!--  NAV MESH -->
    <script src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js"></script>

    <script src="./js/components.js" defer></script>
    <script src="./js/intro.js" defer></script>
    <link rel="stylesheet" href="./css/styles.css" />
  </head>
  <body class="loading">
    <div id="postcard" class="postcard">
      <div class="message">
        <p>
          Alex, I’m getting desperate. Nothing is what it seems here and right
          now I’m clutching at straws. I’m willing to try anything to get some
          kind of clue on where you are and what happened to you. I’ve even
          decided to ask a medium. I know I always made fun of your tarot card
          sessions and that woman who claimed she could talk to your dead
          mother. But maybe the mumbo jumbo will make more sense than the
          reality in this place.
        </p>
      </div>
      <div class="address">
        <h1>Level V</h1>
        <h2>The Medium</h2>
      </div>
    </div>
    <div id="intro" class="info-box">
      <h1>Welcome to The Medium!</h1>
      <p>
        Here you will reach a new level of insight in to the mysteries of life
        and elevate your soul to a higher state of being!<br />
        This is not an offer, it's a demand. You are not free to leave until you
        face The Truth – or deposit 1.000.000 bitcoins/gold coins to this
        account: 7263849-9264195.<br /><br />
        <strong>Follow the light to enlightenment!</strong>
      </p>
    </div>

    <a-scene
      physics="gravity: -9.8; restitution: 0.7;"
      vr-mode-ui="enabled: false"
      light="defaultLightsEnabled: false"
      renderer="physicallyCorrectLights: true"
      inspector-plugin-recast
      camera-text="target: #cam-text;"
    >
      <a-assets>
        <a-asset-item
          id="nav-mesh-1"
          src="./assets/nav-mesh/navmesh.gltf"
        ></a-asset-item>
        <a-asset-item
          id="nav-mesh-2"
          src="./assets/nav-mesh/navmesh-2.gltf"
        ></a-asset-item>
        <a-asset-item id="table" src="./assets/models/table.glb"></a-asset-item>
        <a-asset-item id="chair" src="./assets/models/chair.glb"></a-asset-item>
        <a-asset-item
          id="medium"
          src="./assets/models/medium.glb"
        ></a-asset-item>
        <a-asset-item
          id="fireplace"
          src="./assets/models/fireplace3.glb"
        ></a-asset-item>
        <a-asset-item id="synth" src="./assets/models/synth.glb"></a-asset-item>
        <a-asset-item
          id="chandelier"
          src="./assets/models/chandelier.glb"
        ></a-asset-item>
        <a-asset-item id="pig" src="./assets/models/pig-bank.glb"></a-asset-item>
        <a-asset-item
          id="bookcase"
          src="./assets/models/bookcase1.glb"
        ></a-asset-item>
        <a-asset-item
          id="mirror"
          src="./assets/models/mirror.glb"
        ></a-asset-item>
        <a-asset-item
          id="pillar"
          src="./assets/models/pillar.glb"
        ></a-asset-item>

        <img id="wood" src="./assets/textures/wood.jpg" />
        <img id="wood-nrm" src="./assets/textures/wood-nrm.jpg" />
        <img id="portrait" src="./assets/pictures/silhouette.jpg" />
        <img id="paper" src="./assets/pictures/paper-small.png" />
        <img id="intro-paper" src="./assets/pictures/intro-paper.png" />
        <img id="tarot-1" src="./assets/tarot/tarot-5-3.jpg" />
        <img id="tarot-2" src="./assets/tarot/tarot-3-1.jpg" />
        <img id="tarot-3" src="./assets/tarot/tarot-3-2.jpg" />
        <img id="tarot-marker-1" src="./assets/tarot/tarot-star-marker.jpg" />
        <img id="tarot-marker-2" src="./assets/tarot/tarot-eye-marker.jpg" />
        <img
          id="tarot-marker-3"
          src="./assets/tarot/tarot-necklace-marker.jpg"
        />
        <img id="speechbubble" src="./assets/pictures/speech.png" />
        <img id="qr" src="assets/tarot/frame.png" />
        <img id="sunny-field" src="assets/pictures/sunny-field.jpg" />
      </a-assets>

      <a-sky src="#sunny-field"></a-sky>

      <a-light type="ambient" intensity="1"></a-light>
      <a-light
        id="spot-1"
        type="spot"
        color="red"
        intensity="20"
        position="-4.5 3 2.5"
        rotation="-45 90 0"
      ></a-light>
      <a-plane
        static-body
        id="floor"
        position="0 0 0"
        rotation="-90 0 0"
        width="10"
        height="10"
        color="black"
        shadow
      ></a-plane>
      <a-gltf-model
        id="nav-mesh"
        src="#nav-mesh-1"
        position="0 -0.1 0"
        visible="false"
        nav-mesh
      ></a-gltf-model>
      <a-box
        static-body
        id="roof-right"
        position="3 5 0"
        rotation="45 -90 0"
        width="10"
        height="8.5"
        depth="0.2"
        material="color: #423207;
        side: double;
        src: #wood;
        normal-map: #wood-nrm;
        normal-texture-repeat: 10;
        repeat: 10;"
      ></a-box>
      <a-box
        static-body
        id="roof-left"
        position="-3 5 0"
        rotation="-45 -90 0"
        width="10"
        height="8.5"
        depth="0.2"
        material="color: #423207;
        side: double;
        src: #wood;
        normal-map: #wood-nrm;
        normal-texture-repeat: 10;
        repeat: 10;"
      ></a-box>
      <a-plane
        static-body
        id="back-wall"
        position="0 1.5 -5"
        rotation="0 0 0"
        width="10"
        height="3"
        depth="0.2"
        material="color: #423207;
        side: double;
        src: #wood;
        normal-map: #wood-nrm;
        normal-texture-repeat: 10;
        repeat: 10;"
      ></a-plane>
      <a-box
        static-body
        id="right-wall"
        position="5 1.5 0"
        rotation="0 -90 0"
        width="10"
        height="3"
        depth="0.2"
        material="color: #423207;
        side: double;
        src: #wood;
        normal-map: #wood-nrm;
        normal-texture-repeat: 10;
        repeat: 10;"
      ></a-box>
      <a-box
        static-body
        id="left-wall"
        position="-5 1.5 0"
        rotation="0 -90 0"
        width="10"
        height="3"
        depth="0.2"
        material=" color: #423207;
        side: double;
        src: #wood;
        normal-map: #wood-nrm;
        normal-texture-repeat: 10;
        repeat: 10;"
      ></a-box>
      <a-triangle
        position="-5 3 -5"
        material="color: #423207;
        side: double;
        src: #wood;
        normal-map: #wood-nrm;
        normal-texture-repeat: 10;
        repeat: 10;"
        vertex-a="10 0"
        vertex-b="0 0"
        vertex-c="5 5"
      ></a-triangle>
      <a-plane
        static-body
        id="front-wall"
        position="0 1.5 5"
        rotation="0 0 0"
        width="10"
        height="3"
        depth="0.2"
        material="color: #423207;
        side: double;
        src: #wood;
        normal-map: #wood-nrm;
        normal-texture-repeat: 10;
        repeat: 10;"
      ></a-plane>
      <a-triangle
        position="-5 3 5"
        material="color: #423207;
        side: double;
        src: #wood;
        normal-map: #wood-nrm;
        normal-texture-repeat: 10;
        repeat: 10;"
        vertex-a="10 0"
        vertex-b="0 0"
        vertex-c="5 5"
      ></a-triangle>

      <a-image
        src="#paper"
        position="-4.89 2.05 -0.9"
        rotation="0 90 0"
        width="0.9"
      ></a-image>
      <a-text
        font="https://cdn.aframe.io/fonts/Monoid.fnt"
        position="-4.88 2.05 -0.9"
        value="In Pleasantville \n we REALLY \n \n \n \n \n see you!"
        width="2"
        align="center"
        color="black"
        rotation="0 90 0"
      ></a-text>
      <a-sphere
        id="eye-sphere-1"
        look-at="#camera"
        color="#B6A795"
        radius="0.15"
        position="-5 2 -1"
      >
        <a-sphere color="black" position="0 0 0.13" radius="0.05"></a-sphere>
      </a-sphere>
      <a-sphere
        id="eye-sphere-2"
        look-at="#camera"
        color="#B6A795"
        radius="0.15"
        position="-5 2 -0.7"
      >
        <a-sphere color="black" position="0 0 0.13" radius="0.05"></a-sphere>
      </a-sphere>
      <a-gltf-model
        static-body
        src="#fireplace"
        position="-1 -2 -2.1"
        scale="1.5 1.5 1.5"
        rotation="0 60 0"
      ></a-gltf-model>

      <a-gltf-model
        static-body
        src="#synth"
        position="4.8 0.3 -1"
        rotation="0 -90 0"
        scale="0.4 0.4 0.4"
      ></a-gltf-model>
      <a-gltf-model
        static-body
        src="#bookcase"
        position="-4.72 0.5 2.5"
        rotation="0 90 0"
        scale="0.9 0.9 0.9"
      >
      </a-gltf-model>
      <a-text
        font="https://cdn.aframe.io/fonts/Monoid.fnt"
        position="-4.675 2.04 2.5"
        value="You \n need \n to"
        width="0.9"
        align="center"
        color="white"
        rotation="0 100 0"
      ></a-text>
      <a-entity
        text="font: https://cdn.aframe.io/fonts/Monoid.fnt;
        value: CHANGE;
        width: 1.5;
        align: center;
        color: white;"
        geometry="primitive: plane; height: 0.3; width: 0.3"
        material="color: red"
        rotation="-15 180 0"
        position="-4.71 1.73 2.93"
        animation="property: material.color;
                             from: #FF0000;
                             to: #FFFF00;
                             loop: true;
                             dir: alternate;
                             dur: 1500"
        change-perspective="target: #camera-rig; text: #cam-text;"
      ></a-entity>
      <a-text
        font="https://cdn.aframe.io/fonts/Monoid.fnt"
        position="-4.58 1.05 2.19"
        value="PERSPECTIVE"
        width="0.8"
        align="center"
        color="white"
        rotation="-10 90 85"
      ></a-text>
      <a-entity
        text="font: https://cdn.aframe.io/fonts/Monoid.fnt;
        value: First truth: \n
        You were not that \n
        fun to be married to.;
        width: 0.8;
        align: center;
        color: white;"
        position="-4.66 0.82 2.5"
        rotation="90 90 0"
        geometry="primitive: plane; height: 0.25; width: 0.5"
        material="color: red"
        animation="property: material.color;
                             from: #FF0000;
                             to: #FFFF00;
                             loop: true;
                             dir: alternate;
                             dur: 1500"
        change-perspective="target: #camera-rig; text: #cam-text;"
      ></a-entity>
      <a-gltf-model
        static-body
        src="#mirror"
        position="-3 1.5 -4.9"
        rotation="0 0 0"
        scale="0.1 0.1 0.1"
      ></a-gltf-model>
      <a-image
        id="#partner"
        src="#portrait"
        position="-3 1.5 -4.88"
        height="0.9"
        width="0.5"
        fade-away="fadein: #second-truth; text: #cam-text;"
      ></a-image>
      <a-text
        id="second-truth"
        font="https://cdn.aframe.io/fonts/Monoid.fnt"
        value="Second truth: \n
        This is what \n
        your partner \n
        felt like \n
        - invisible."
        align="center"
        color="black"
        position="-3 1.5 -4.85"
        width="1.5"
        opacity="0"
      ></a-text>
      <a-gltf-model
        static-body
        src="#chandelier"
        position="0 5 0"
        rotation="0 0 0"
        scale="0.2 0.2 0.2"
      ></a-gltf-model>
      <a-gltf-model
        static-body
        src="#pillar"
        position="4 0 -4.5"
        scale="0.15 0.15 0.15"
      ></a-gltf-model>
      <a-box
        static-body
        id="flying"
        opacity="0"
        height="0.1"
        width="0.4"
        depth="0.4"
        position="4 1.35 -4.5"
        fly="target: #grounded-pig; 
        fadein: #third-truth; 
        medium: #the-medium; 
        speech: #speech; 
        speechText: #speech-text-1;
        text: #cam-text;"
      ></a-box>
      <a-gltf-model
        id="grounded-pig"
        dynamic-body="mass: 10"
        grabbable
        src="#pig"
        position="3 0.5 -4.5"
        scale="0.5 0.5 0.5"
      ></a-gltf-model>
      <a-text
        id="third-truth"
        font="https://cdn.aframe.io/fonts/Monoid.fnt"
        value="Third truth: \n
        This is how likely it is \n
        that the two of you \n
        will get back together."
        align="center"
        color="white"
        position="4 2.2 -4.9"
        width="2.2"
        opacity="0"
      ></a-text>

      <a-gltf-model
        static-body
        src="#table"
        position="3.5 0.8 0.5"
        scale="0.004 0.004 0.004"
        rotation="0 90 0"
      ></a-gltf-model>
      <a-gltf-model
        static-body
        src="#chair"
        position="4.5 0.3 0.5"
        scale="0.06 0.06 0.06"
        rotation="0 -90 0"
      ></a-gltf-model>
      <a-gltf-model
        id="the-medium"
        static-body
        src="#medium"
        position="4.5 0.3 0.5"
        scale="0.01 0.01 0.01"
        rotation="0 -90 0"
        visible="false"
      ></a-gltf-model>
      <a-image
        id="speech"
        src="#speechbubble"
        position="4.2 2. 1.4"
        rotation="0 -90 0"
        visible="false"
        tarot="message1: #speech-text-1; message2: #speech-text-2; text: #cam-text;"
      >
      </a-image>
      <a-text
        id="speech-text-1"
        font="https://cdn.aframe.io/fonts/Monoid.fnt"
        position="4.19 2.15 1"
        value="Whoa, those Truths were harsh! The spirits are not so good at sugarcoating things... But now it's time to move on.              ->"
        wrap-count="20"
        width="0.8"
        align="left"
        color="black"
        rotation="0 -90 0"
        visible="false"
      ></a-text>
      <a-text
        id="speech-text-2"
        font="https://cdn.aframe.io/fonts/Monoid.fnt"
        position="4.19 2.3 1"
        value="These cards will help you."
        wrap-count="20"
        width="0.8"
        align="left"
        color="black"
        rotation="0 -90 0"
        visible="false"
      ></a-text>
      <a-image
        id="marker-1"
        src="#tarot-marker-1"
        width="1.5"
        height="2.5"
        position="3.5 1.5 4.9"
        rotation="0 180 0"
        visible="false"
      >
      </a-image>
      <a-image
        id="marker-2"
        src="#tarot-marker-2"
        width="1.5"
        height="2.5"
        position="0 1.5 4.9"
        rotation="0 180 0"
        visible="false"
      >
      </a-image>
      <a-image
        id="marker-3"
        src="#tarot-marker-3"
        width="1.5"
        height="2.5"
        position="-3.5 1.5 4.9"
        rotation="0 180 0"
        visible="false"
      >
      </a-image>
      <a-image
        id="end-message"
        src="#intro-paper"
        width="2"
        height="3"
        position="0 1 10"
        rotation="0 0 0"
        side="double"
      >
        <a-text
        font="https://cdn.aframe.io/fonts/Monoid.fnt"
        position="0 0 -0.2"
        value="Ok, this might not have been what you wanted to find out. 
        You should have paid me the bitcoins and continued to live in denial. 
        But you didn't and here you are. Now it's time to get out. 
        Beware of the policecars."
        wrap-count="25"
        width="1.5"
        align="center"
        color="black"
        rotation="0 180 0"
        > </a-text>
      </a-image>

      <a-entity
        id="camera-rig"
        progressive-controls
        movement-controls="constrainToNavMesh: true"
        position="0 0 3"
      >
        <a-entity
          id="camera"
          camera
          position="0 1.6 0"
          look-controls="pointerLockEnabled: true"
        >
          <a-text
            id="cam-text"
            font="https://cdn.aframe.io/fonts/Monoid.fnt"
            value="Follow the light!
            I: Change perspective."
            color="white"
            position="-0.12 -0.07 -0.1"
            width="0.1"
            visible="false"
          ></a-text>
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
